{% extends "layout.html" %} 
{% block title %}{% endblock %} 
{% block head %} 
{{ super() }}
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Bonheur+Royale&family=Libre+Baskerville&display=swap"
  rel="stylesheet"
/>
    <title>Lista Multiselect</title>
    <style>
        body {
            display: flex;
            justify-content: space-around;
            padding: 20px;
        }

        .column {
            width: 30%;
            padding: 10px;
            border: 1px solid #ccc;
        }

        button {
            margin: 5px;
        }
    </style>
    {% endblock %}


    {% block content %}




    <div class="column">
        <form action={{ url_for('plug')  }} method="POST">
        <h3><input type="text" id="lmname" name="lmname" value="Carte saisoniere Hivernale"><input type="number" min ="1.00" step ="0.10" id="prix" name="prix" value="38"></h3>
        <select id="multiselect" name="multiselect" multiple size="35">
            <!--optgroup label="Entrés"-->
            {% for row in registros %} 
            <option value="{{ row['titre'] }}">{{ row['titre'] }}</option>
            {% endfor %}
            <!-- Agrega más elementos según sea necesario -->
        </select>
        <br>
        <button type="button" onclick="copyTo('multiselect','list2')">Copiar a Lista 2</button>
        <button type="button" onclick="copyTo('multiselect','list3')">Copiar a Lista 3</button>
        <button  type="button"onclick="copyTo('multiselect','list4')">Copiar a Lista 4</button>
        <input type="text" id="textoInput">
    <button  type="button"onclick="agregarOpcion()">Agregar </button>
    </div>
    
    <div class="column">
        <h3><input type="text" id="l2name" name="l2name" value="Entré"></h3>
        <select id="list2" name="list2" multiple></select>
        <br>
        <button  type="button"onclick="copyTo( 'list2', 'multiselect')">Copiar a Lista 1</button> 
        <div class="column" id="column2">
        
        <!-- Los elementos seleccionados se copiarán aquí -->
        <button type="button" onclick="removeSelected('list2')">Eliminar Seleccionados</button>
    </div>
    </div>

    <div class="column">
        <h3><input type="text" id="l3name" name="l3name" value="Plat"></h3>
        <select id="list3" name="list3" multiple></select>
        <br>
        <button type="button" onclick="copyTo( 'list3','multiselect')">Copiar a Lista 1</button>
        <div class="column" id="column3">
        
        <!-- Los elementos seleccionados se copiarán aquí -->
        <button type="button" onclick="removeSelected('list3')">Eliminar Seleccionados</button>
    </div>
    </div>

    <div class="column">
        <h3> <input type="text" id="l4name" name="l4name" value="Dessert"></h3>
        <select id="list4" name="list4" multiple></select>
        <br>
        <button type="button" onclick="copyTo( 'list4', 'multiselect')">Copiar a Lista 1</button>
    <div class="column" id="column4">
        
        <!-- Los elementos seleccionados se copiarán aquí -->
        <button type="button" onclick="removeSelected('list4')">Eliminar Seleccionados</button>
    </div>
    </div>
<button type="submit" name="accion" value="add" class=""  onclick="guardarListas()">Guardar Listas</button>
</form>
  
    



    

    
    
    
    
    
    
    
    <script>
        function copyTo(sourceId, destinationId) {
            var sourceList = document.getElementById(sourceId);
            var destinationList = document.getElementById(destinationId);

            for (var i = 0; i < sourceList.options.length; i++) {
                if (sourceList.options[i].selected) {
                    var option = sourceList.options[i];
                    var newOption = new Option(option.text, option.value);
                    destinationList.add(newOption);
                }
            }
        }

        function agregarOpcion() {
            // Obtener el valor del campo de texto
            var texto = document.getElementById("textoInput").value;

            // Crear un elemento de opción
            var opcion = document.createElement("option");
            opcion.text = texto;
            opcion.value = texto;

            // Agregar la opción al select
            document.getElementById("list2").appendChild(opcion);
        }

        
    function removeSelected(columnId) {
        var column = document.getElementById(columnId);
        var selectedOptions = column.selectedOptions;

        for (var option of selectedOptions) {
            option.remove();
        }
    }

        function copyTo(sourceId, destinationId) {
            var sourceList = document.getElementById(sourceId);
            var destinationList = document.getElementById(destinationId);

            for (var i = 0; i < sourceList.options.length; i++) {
                if (sourceList.options[i].selected) {
                    var option = sourceList.options[i];
                    var newOption = new Option(option.text, option.value);
                    destinationList.add(newOption);
                }
            }
        }

        function seleccionarTodos() {
            var select = document.getElementById("list2");
            for (var i = 0; i < select.options.length; i++) {
                select.options[i].selected = true;
            }
            var select = document.getElementById("list3");
            for (var i = 0; i < select.options.length; i++) {
                select.options[i].selected = true;
            }
            var select = document.getElementById("list4");
            for (var i = 0; i < select.options.length; i++) {
                select.options[i].selected = true;
            }
        }


        function guardarListas() {
            seleccionarTodos()
            var listas = {
                lista1: obtenerContenidoLista('multiselect'),
                lista2: obtenerContenidoLista('list2'),
                lista3: obtenerContenidoLista('list3'),
                lista4: obtenerContenidoLista('list4')
            };

            // Aquí enviaríamos los datos al servidor utilizando fetch()
            fetch('https://jsonplaceholder.typicode.com/posts', {
                method: 'POST',
                body: JSON.stringify(listas),
                headers: {
                    'Content-type': 'application/json; charset=UTF-8',
                },
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
        }

        function obtenerContenidoLista(id) {
            var lista = document.getElementById(id);
            var contenido = [];
            for (var i = 0; i < lista.options.length; i++) {
                contenido.push(lista.options[i].value);
            }
            return contenido;
        }
    </script>

    

    {% endblock %}
</body>
</html>
